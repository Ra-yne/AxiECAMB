# <a name="top"></a>AxiECAMB 2.0

*[AxiECAMB, AxionCAMB, CAMB](#intro)

*[Getting Started](#basics)

*[Physics of Ultralight Axions](#physics)

*[Known Warnings and Developing Features](#warnings)

----------------------------------------------------------------------
#### <a name="intro"></a>AxiECAMB, AxionCAMB, CAMB

AxiECAMB (Axion Effective-method in CAMB) implements the effective method tracking the evolution of ultralight axions through cosmological history, and accurately computes the resulting CMB and linear matter power spectra. The technique and accuracy test are detailed in arXiv:2412.xxxx (Rayne Liu, Wayne Hu, and Daniel Grin). 

The code base of AxiECAMB is AxionCAMB (https://github.com/dgrin1/axionCAMB), which itself is based on the Nov 2013 version of CAMB (http://camb.info/, https://github.com/cmbant/CAMB). Hence, AxiECAMB retains the general compatibility of AxionCAMB in terms of parameter esitmations. To use AxiECAMB in your research, please cite arXiv:2412.xxxx as well as CAMB.

----------------------------------------------------------------------
#### <a name="basics"></a>Getting Started

If cloning this repository for the first time, run "make" to compile the code. Revise Makefile as necessary for compatibility with your fortran compiler.

----------------------------------------------------------------------
#### <a name="physics"></a>Physics of Ultralight Axions

----------------------------------------------------------------------
#### <a name="warnings"></a>Know Warnings and Developing Features


#######################################



AxionCamb adds one new fluid component: the axion fluid. This is included in equations_ppf.f90.
The axion fluid is consistently incoroporated into the evolution of all background and perturbation variables, including, for example, recombination in recfast_axion.f90.
There are two new parameters: the axion mass, ma (measured in eV), and the axion energy density, omaxh2. These are entered in params.ini as usual.
Sensible values for the axion mass range between 1e-33 and 1e-18, though the code works for values outside of this range.
The axion fluid can function as either a dark matter component or a dark energy component depending on the mass.

Isocurvature perturbations in the axion fluid can be turned on using initial_condition=6. 
For isocurvature as described in http://arxiv.org/abs/1708.05681, set axion_isocurvature=T. Hinf is log10(H_inf), where H_inf is the inflationary Hubble parameter in GeV. In arxiv/1708.05681, this is the parameter varied and the tensor/scalar ratio and isocurvature amplitude alpha_ax are derived parameters.  When axion_isocurvature=T, the code outputs the sum of the adiabatic and isocurvature power spectrum in the CMB output files.
AxionCamb can be used in conjunction with the additional neutrino parameters of neutrino mass and number of species.
AxionCamb cannot (currently) be used in conjunction with additional dark energy parameters, such as the equation of state.

At early times, the fluid equations solved are equivalent to the first order perturbed Klein-Gordon equation in synchronous gauge.
At late times, the WKB approximation matches the axion field to an effectieve fluid with equation of state zero, and a scale-dependent sound-speed.
The energy density is found using a shooting method from an initial guess for the axion field value. 
The background evolution is computed in axion_background.f90, which creates an array for the axion equation of state. This array is carried around everywhere the energy densities are needed.


You should be careful if you use any non-linear options (setting do_nonlinear \= 0). AxionCamb uses halofit_ppf.f90 with various modifications. The treatment of axions is not expected to be quantitatively correct, and various approximations are made (these will documented at a later date). The default version of halofit is set to the original "Smith" version, as this is expected to be most stable.
You should also be careful of galaxy bias if you use galaxy survey data, as discussed in HGMF.